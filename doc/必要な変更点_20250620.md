# WEB3 MONEY 必要な変更点

**日付**: 2025年6月20日  
**対象**: FUJITA様要望書への対応

## 🚨 クリティカル（即時対応必要）

### 1. 背景色の修正
**問題**: Basicページが黒背景になっている（白背景であるべき）

**修正箇所**: `/src/components/VotingPageContent.tsx`

**現在のコード**:
```typescript
const getPageStyles = () => ({
  background: 'bg-black',
  textPrimary: 'text-white',
  textSecondary: 'text-gray-300',
  cardBg: 'bg-gray-900',
  accent: 'text-yellow-400'
});
```

**修正後のコード**:
```typescript
const getPageStyles = () => {
  if (votePage === 'basic') {
    return {
      background: 'bg-white',
      textPrimary: 'text-black',
      textSecondary: 'text-gray-700',
      cardBg: 'bg-gray-50',
      accent: 'text-blue-600',
      border: 'border-gray-200'
    };
  } else {
    return {
      background: 'bg-black',
      textPrimary: 'text-white',
      textSecondary: 'text-gray-300',
      cardBg: 'bg-gray-900',
      accent: 'text-yellow-400',
      border: 'border-gray-700'
    };
  }
};
```

**影響範囲**: 
- レリモバ契約者ページ（Basic）の見た目が白背景・黒文字に変更
- オプション加入者ページ（Premium）は現状維持

---

## 🔧 推奨改善（短期対応）

### 2. フィールドラベルの調整
**目的**: 要望書の表現により近づける

**修正箇所**: `/src/components/VotingCard.tsx`

**現在**: 「お名前」  
**修正後**: 「レリモバ契約名義」

```typescript
// 現在の実装
<label className="block text-sm font-medium mb-1">
  お名前 <span className="text-red-500">*</span>
</label>

// 修正後
<label className="block text-sm font-medium mb-1">
  レリモバ契約名義 <span className="text-red-500">*</span>
</label>
```

### 3. Google Sheets接続の確認
**目的**: 新しいスプレッドシートURLとの連携確認

**対応手順**:
1. 管理画面 `/admin/campaigns` にアクセス
2. 新しいGoogle SheetsのURL設定
3. 「接続をテスト」機能で動作確認
4. フィールドマッピングの確認

**提供されたURL**: 
```
https://docs.google.com/spreadsheets/d/1T5hbPu7-PJ7sILcu3uIbCQrBJv9B5VE-XlWU6029w1g/edit?gid=1457896601#gid=1457896601
```

---

## ✅ 対応不要（既に実装済み）

### 投票システム機能
- ✅ 2つの投票ページ（Basic/Premium）
- ✅ 投票権重システム（1票/5票）
- ✅ 重複投票制御（各ページ1回ずつ）
- ✅ YouTube出演選択（Premiumのみ）
- ✅ 投票数の表示制御（個人権数非表示）
- ✅ ユーザー情報収集（ファイナンスID、メール）

### UI/UX機能
- ✅ レスポンシブデザイン
- ✅ ローディング状態の表示
- ✅ エラーハンドリング
- ✅ ユーザー情報のキャッシュ

---

## 📋 実装手順

### Step 1: 背景色修正（必須）
1. `/src/components/VotingPageContent.tsx` を開く
2. `getPageStyles()` 関数を上記コードで置き換え
3. 動作確認:
   - `/voting/basic` → 白背景・黒文字
   - `/voting/premium` → 黒背景・白文字

### Step 2: ラベル修正（推奨）
1. `/src/components/VotingCard.tsx` を開く
2. 「お名前」ラベルを「レリモバ契約名義」に変更
3. UI確認

### Step 3: Google Sheets設定（必須）
1. 管理画面でGoogle SheetsのURL更新
2. 接続テスト実行
3. データ同期確認

### Step 4: 動作テスト（必須）
1. 各ページでの投票テスト
2. データ保存確認
3. 投票権重の動作確認
4. YouTube選択の動作確認

---

## 🎯 完了後の確認項目

### 機能確認
- [ ] Basicページが白背景で表示される
- [ ] Premiumページが黒背景で表示される
- [ ] 投票権重が正しく動作する（Basic:1, Premium:5）
- [ ] YouTube選択がPremiumページのみに表示される
- [ ] 投票データがGoogle Sheetsに正しく保存される
- [ ] 重複投票が防止される

### UI確認  
- [ ] 文字の視認性が良好
- [ ] ボタンやフォームが適切に表示される
- [ ] レスポンシブデザインが保持される
- [ ] アクセシビリティが保持される

### データ確認
- [ ] Google Sheetsにデータが正しく保存される
- [ ] 投票権重が適切に記録される
- [ ] YouTube選択データが保存される

---

## ⚠️ 注意事項

1. **背景色変更の影響**
   - Basic ページの全体的な見た目が大きく変わります
   - 文字の視認性を確認してください

2. **Google Sheets権限**
   - 新しいスプレッドシートへのアクセス権限が必要です
   - Google Apps Script側での設定も確認してください

3. **テスト環境**
   - 本番環境への適用前に開発環境でのテストを推奨します

---

**作業優先度**: 高（背景色修正）→ 中（Google Sheets設定）→ 低（ラベル調整）  
**想定作業時間**: 1-2時間  
**リスクレベル**: 低（既存機能への影響は最小限）